<!DOCTYPE html>
<html>
<head>
    <title>Image Loading Debug Test</title>
</head>
<body>
    <h1>Image Loading Debug Test</h1>
    
    <div id="results">
        <h2>Test Results:</h2>
        <div id="placeholder-results"></div>
        <div id="localhost-results"></div>
    </div>
    
    <script>
        console.log('Debugging image loading issues...');
        
        // Test if placeholder images exist and are accessible
        const testImageLoading = (url, description) => {
            return new Promise((resolve) => {
                console.log(`Testing ${description}: ${url}`);
                
                const img = new Image();
                img.onload = () => {
                    console.log(`✅ ${description} loaded successfully - Size: ${img.width}x${img.height}`);
                    resolve({ success: true, url, description, width: img.width, height: img.height });
                };
                img.onerror = () => {
                    console.log(`❌ ${description} failed to load`);
                    resolve({ success: false, url, description });
                };
                img.src = url;
            });
        };
        
        // Test all placeholder images
        const testPlaceholders = async () => {
            const placeholders = [
                { url: '/images/placeholder-image-new.png', description: 'New placeholder image' },
                { url: '/images/placeholder-image.png', description: 'Old placeholder image' },
                { url: '/images/placeholder-video-new.png', description: 'New placeholder video' },
                { url: '/images/placeholder-video.png', description: 'Old placeholder video' }
            ];
            
            console.log('Testing placeholder images:');
            const results = [];
            for (const placeholder of placeholders) {
                const result = await testImageLoading(placeholder.url, placeholder.description);
                results.push(result);
            }
            return results;
        };
        
        // Test a typical localhost image URL
        const testLocalhostImage = async () => {
            const localhostUrl = 'http://localhost:8000/uploads/talkcart/file_1762529225547_3uzoa3u7b7o.jpg';
            return await testImageLoading(localhostUrl, 'Localhost image');
        };
        
        // Test HTTPS version
        const testHttpsVersion = async () => {
            const httpsUrl = 'https://localhost:8000/uploads/talkcart/file_1762529225547_3uzoa3u7b7o.jpg';
            return await testImageLoading(httpsUrl, 'HTTPS version');
        };
        
        // Test alternative port
        const testAlternativePort = async () => {
            const altPortUrl = 'http://localhost:3000/uploads/talkcart/file_1762529225547_3uzoa3u7b7o.jpg';
            return await testImageLoading(altPortUrl, 'Alternative port (3000)');
        };
        
        // Display results in the DOM
        const displayResults = (results, containerId) => {
            const container = document.getElementById(containerId);
            const ul = document.createElement('ul');
            
            results.forEach(result => {
                const li = document.createElement('li');
                if (result.success) {
                    li.innerHTML = `✅ ${result.description}: ${result.url} (${result.width}x${result.height})`;
                    li.style.color = 'green';
                } else {
                    li.innerHTML = `❌ ${result.description}: ${result.url}`;
                    li.style.color = 'red';
                }
                ul.appendChild(li);
            });
            
            container.appendChild(ul);
        };
        
        // Run all tests
        const runTests = async () => {
            console.log('Starting image loading debug tests...');
            
            // Test placeholders
            const placeholderResults = await testPlaceholders();
            displayResults(placeholderResults, 'placeholder-results');
            
            // Test localhost images
            const localhostResult = await testLocalhostImage();
            displayResults([localhostResult], 'localhost-results');
            
            const httpsResult = await testHttpsVersion();
            displayResults([httpsResult], 'localhost-results');
            
            const altPortResult = await testAlternativePort();
            displayResults([altPortResult], 'localhost-results');
            
            console.log('✅ All debug tests completed');
        };
        
        // Run the tests
        runTests().catch(console.error);
    </script>
</body>
</html>